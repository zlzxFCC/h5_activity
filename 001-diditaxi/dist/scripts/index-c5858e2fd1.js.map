{"version":3,"sources":["index.js"],"names":["document","addEventListener","share_config","general_config","img_url","sharetitle","sharedesc","link","location","href","obj","WeixinJSBridge","on","argv","invoke","appid","img_width","img_height","title","desc","res","docuH","documentElement","clientHeight","firLoadImg","getElementsByClassName","secLoadImg","allMoveBox","aStory","aButton","oShare","autiobtn","style","height","addClass","ele","strClass","reg","RegExp","test","className","trim","removeClass","nodeType","Error","replace","getIndex","nIndex","p","previousSibling","i","length","backgroundImage","dataset","url","imgObj","Image","src","onload","display","index","onclick","window","setTimeout","audio","getElementById","paused","play","pause","mySwiper","Swiper","paginationClickable","mode","onSlideChangeEnd","thisDiv","activeSlide","console","log"],"mappings":"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","file":"index.js","sourcesContent":["(function() {\r\n    document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {\r\n        var share_config = {\r\n            general_config:{\r\n                img_url: 'http://static.diditaxi.com.cn/site/pages/thank-2014/globle-logo.png',\r\n                sharetitle:\"谢谢你，陌生人\",//share,\r\n                //sharedesc:share,\r\n                sharedesc:\"一句问候，一个微笑，一次关心，虽来自陌生人，却足以温暖人心\",//'滴滴打车给我' + number + '个红包，分你1个，拿去打车领更大红包～',\r\n                //link: gloBlink\r\n                link:location.href\r\n            }\r\n        };\r\n        var obj = share_config.general_config;\r\n        WeixinJSBridge.on('menu:share:appmessage', function(argv) {\r\n            WeixinJSBridge.invoke('sendAppMessage', {\r\n                \"appid\": \"wx69b6673576ec5a65\",\r\n                \"img_url\": obj.img_url,\r\n                \"img_width\": \"\",\r\n                \"img_height\": \"\",\r\n                \"link\": obj.link,\r\n                \"title\": obj.sharetitle,\r\n                \"desc\": obj.sharedesc\r\n            }, function(res) {\r\n\r\n            });\r\n        });\r\n        // 分享到朋友圈\r\n        WeixinJSBridge.on('menu:share:timeline', function(argv) {\r\n            WeixinJSBridge.invoke('shareTimeline', {\r\n                    \"img_url\": obj.img_url,\r\n                    \"img_width\": \"\",\r\n                    \"img_height\": \"\",\r\n                    \"link\": obj.link,\r\n                    \"title\": obj.sharetitle,\r\n                    \"desc\": obj.sharedesc\r\n                }, function(res) {\r\n            });\r\n        });\r\n    });\r\n\r\n    var docuH = document.documentElement.clientHeight,\r\n        firLoadImg = document.getElementsByClassName('firLoad'),\r\n        secLoadImg = document.getElementsByClassName('secLoad'),\r\n        allMoveBox = document.getElementsByClassName('swiper-slide'),\r\n        aStory = document.getElementsByClassName('story'),\r\n        aButton = document.getElementsByClassName('button'),\r\n        oShare = document.getElementsByClassName('share')[0],\r\n        autiobtn = document.getElementsByClassName('autiobtn')[0];\r\n\r\n    document.getElementsByClassName('swiper-container')[0].style.height = docuH + 'px';\r\n\r\n    var addClass = function(ele, strClass) {\r\n        var reg = new RegExp(\"(^| )\" + strClass + \"( |$)\");\r\n        if (reg.test(ele.className)) {\r\n            //如果此类样式已经存在，则什么也不需要做\r\n        } else { //不存在\r\n            ele.className = ele.className.trim() + \" \" + strClass;\r\n        }\r\n    };\r\n\r\n    var removeClass = function(ele, strClass) {\r\n        if (!(ele && ele.nodeType == 1)) {\r\n            throw new Error('第一参数ele需要是一个DOM元素对象');\r\n        }\r\n        if (typeof strClass != 'string') {\r\n            throw new Error('第二参数必须为string类型');\r\n        }\r\n        var reg = new RegExp(\"(?:^| )\" + strClass + \"(?: |$)\", \"g\");\r\n        ele.className = ele.className.replace(reg, '').trim();\r\n    };\r\n\r\n    var getIndex = function(ele) {\r\n        var nIndex = 0;\r\n        var p = ele.previousSibling\r\n        while (p) {\r\n            if (p.nodeType == 1) {\r\n                nIndex++;\r\n            }\r\n            p = p.previousSibling;\r\n        }\r\n        return nIndex;\r\n    };\r\n\r\n    for (var i = 0; i < firLoadImg.length; i++) {\r\n        firLoadImg[i].style.backgroundImage = firLoadImg[i].dataset.url;\r\n        addClass(allMoveBox[0], 'slide-move');\r\n    }\r\n\r\n\r\n    var imgObj = new Image();\r\n    imgObj.src = \"images/page-1.jpg\";\r\n\r\n    imgObj.onload = function() {\r\n        for (var i = 0; i < secLoadImg.length; i++) {\r\n            secLoadImg[i].style.backgroundImage = secLoadImg[i].dataset.url;\r\n        }\r\n        document.getElementsByClassName('loading')[0].style.display = 'none';\r\n        addClass(allMoveBox[0], 'slide-move');\r\n    }\r\n\r\n    for(var i=0;i<aStory.length;i++) {\r\n        (function(index){\r\n            aButton[i].onclick=function() {\r\n                addClass(aStory[index], 'storyShow');\r\n                aStory[index].style.display = 'block';\r\n            };\r\n\r\n            aStory[i].onclick = function() {\r\n                removeClass(aStory[index], 'storyShow');\r\n                window.setTimeout(function(){\r\n                    aStory[index].style.display = 'none';\r\n                },300);\r\n            }\r\n        })(i);\r\n    }\r\n\r\n    aButton[aButton.length-1].onclick = function(){\r\n        oShare.style.display = 'block';\r\n    }\r\n\r\n    oShare.onclick = function(){\r\n        oShare.style.display = 'none';\r\n    }\r\n\r\n    autiobtn.onclick = function() {\r\n        var audio = document.getElementById('media');\r\n        if(audio!==null){\r\n            if(audio.paused){\r\n                audio.play();\r\n                addClass(autiobtn, 'rotate');\r\n            }else{\r\n               audio.pause();\r\n               removeClass(autiobtn, 'rotate');\r\n            }\r\n        }\r\n    }\r\n\r\n    var mySwiper = new Swiper('.swiper-container', {\r\n        paginationClickable: true,\r\n        mode: 'vertical',\r\n        onSlideChangeEnd: function() { //当滑块滑到下一块时\r\n            var thisDiv = mySwiper.activeSlide(),\r\n                thisIndex = getIndex(thisDiv);\r\n            for (var i = 0; i < allMoveBox.length; i++) {\r\n                removeClass(allMoveBox[i], 'slide-move');\r\n            }\r\n            for (var i = 0; i < aStory.length; i++) {\r\n                removeClass(aStory[i],'storyShow');\r\n                aStory[i].style.display = 'none';\r\n            };\r\n            addClass(thisDiv, 'slide-move');\r\n            console.log(\"滑动翻页\");\r\n        }\r\n    });\r\n\r\n})();\r\n"]}