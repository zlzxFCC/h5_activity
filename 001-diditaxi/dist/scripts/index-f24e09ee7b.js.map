{"version":3,"sources":["index.js"],"names":["document","addEventListener","share_config","general_config","img_url","sharetitle","sharedesc","link","location","href","obj","WeixinJSBridge","on","argv","invoke","appid","img_width","img_height","title","desc","res","docuH","documentElement","clientHeight","firLoadImg","getElementsByClassName","secLoadImg","allMoveBox","aStory","aButton","oShare","autiobtn","style","height","addClass","ele","strClass","reg","RegExp","test","className","trim","removeClass","nodeType","Error","replace","getIndex","nIndex","p","previousSibling","i","length","backgroundImage","dataset","url","imgObj","Image","src","onload","display","index","onclick","window","setTimeout","audio","getElementById","paused","play","pause","mySwiper","Swiper","paginationClickable","mode","onSlideChangeEnd","thisDiv","activeSlide"],"mappings":"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","file":"index.js","sourcesContent":["(function() {\n    document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {\n        var share_config = {\n            general_config:{\n                img_url: 'http://static.diditaxi.com.cn/site/pages/thank-2014/globle-logo.png',\n                sharetitle:\"谢谢你，陌生人\",//share,\n                //sharedesc:share,\n                sharedesc:\"一句问候，一个微笑，一次关心，虽来自陌生人，却足以温暖人心\",//'滴滴打车给我' + number + '个红包，分你1个，拿去打车领更大红包～',\n                //link: gloBlink\n                link:location.href\n            }\n        };\n        var obj = share_config.general_config;\n        WeixinJSBridge.on('menu:share:appmessage', function(argv) {\n            WeixinJSBridge.invoke('sendAppMessage', {\n                \"appid\": \"wx69b6673576ec5a65\",\n                \"img_url\": obj.img_url,\n                \"img_width\": \"\",\n                \"img_height\": \"\",\n                \"link\": obj.link,\n                \"title\": obj.sharetitle,\n                \"desc\": obj.sharedesc\n            }, function(res) {\n\n            });\n        });\n        // 分享到朋友圈\n        WeixinJSBridge.on('menu:share:timeline', function(argv) {\n            WeixinJSBridge.invoke('shareTimeline', {\n                    \"img_url\": obj.img_url,\n                    \"img_width\": \"\",\n                    \"img_height\": \"\",\n                    \"link\": obj.link,\n                    \"title\": obj.sharetitle,\n                    \"desc\": obj.sharedesc\n                }, function(res) {\n            });\n        });\n    });\n\n    var docuH = document.documentElement.clientHeight,\n        firLoadImg = document.getElementsByClassName('firLoad'),\n        secLoadImg = document.getElementsByClassName('secLoad'),\n        allMoveBox = document.getElementsByClassName('swiper-slide'),\n        aStory = document.getElementsByClassName('story'),\n        aButton = document.getElementsByClassName('button'),\n        oShare = document.getElementsByClassName('share')[0],\n        autiobtn = document.getElementsByClassName('autiobtn')[0];\n\n    document.getElementsByClassName('swiper-container')[0].style.height = docuH + 'px';\n\n    var addClass = function(ele, strClass) {\n        var reg = new RegExp(\"(^| )\" + strClass + \"( |$)\");\n        if (reg.test(ele.className)) {\n            //如果此类样式已经存在，则什么也不需要做\n        } else { //不存在\n            ele.className = ele.className.trim() + \" \" + strClass;\n        }\n    };\n\n    var removeClass = function(ele, strClass) {\n        if (!(ele && ele.nodeType == 1)) {\n            throw new Error('第一参数ele需要是一个DOM元素对象');\n        }\n        if (typeof strClass != 'string') {\n            throw new Error('第二参数必须为string类型');\n        }\n        var reg = new RegExp(\"(?:^| )\" + strClass + \"(?: |$)\", \"g\");\n        ele.className = ele.className.replace(reg, '').trim();\n    };\n\n    var getIndex = function(ele) {\n        var nIndex = 0;\n        var p = ele.previousSibling\n        while (p) {\n            if (p.nodeType == 1) {\n                nIndex++;\n            }\n            p = p.previousSibling;\n        }\n        return nIndex;\n    };\n\n    for (var i = 0; i < firLoadImg.length; i++) {\n        firLoadImg[i].style.backgroundImage = firLoadImg[i].dataset.url;\n        addClass(allMoveBox[0], 'slide-move');\n    }\n\n    var imgObj = new Image();\n    imgObj.src = \"images/page-1.jpg\";\n\n    imgObj.onload = function() {\n        for (var i = 0; i < secLoadImg.length; i++) {\n            secLoadImg[i].style.backgroundImage = secLoadImg[i].dataset.url;\n        }\n        document.getElementsByClassName('loading')[0].style.display = 'none';\n        addClass(allMoveBox[0], 'slide-move');\n    }\n\n    for(var i=0;i<aStory.length;i++) {\n        (function(index){\n            aButton[i].onclick=function() {\n                addClass(aStory[index], 'storyShow');\n                aStory[index].style.display = 'block';\n            };\n\n            aStory[i].onclick = function() {\n                removeClass(aStory[index], 'storyShow');\n                window.setTimeout(function(){\n                    aStory[index].style.display = 'none';\n                },300);\n            }\n        })(i);\n    }\n\n    aButton[aButton.length-1].onclick = function(){\n        oShare.style.display = 'block';\n    }\n\n    oShare.onclick = function(){\n        oShare.style.display = 'none';\n    }\n\n    autiobtn.onclick = function() {\n        var audio = document.getElementById('media');\n        if(audio!==null){\n            if(audio.paused){\n                audio.play();\n                addClass(autiobtn, 'rotate');\n            }else{\n               audio.pause();\n               removeClass(autiobtn, 'rotate');\n            }\n        }\n    }\n\n    var mySwiper = new Swiper('.swiper-container', {\n        paginationClickable: true,\n        mode: 'vertical',\n        onSlideChangeEnd: function() { //当滑块滑到下一块时\n            var thisDiv = mySwiper.activeSlide(),\n                thisIndex = getIndex(thisDiv);\n            for (var i = 0; i < allMoveBox.length; i++) {\n                removeClass(allMoveBox[i], 'slide-move');\n            }\n            for (var i = 0; i < aStory.length; i++) {\n                removeClass(aStory[i],'storyShow');\n                aStory[i].style.display = 'none';\n            };\n            addClass(thisDiv, 'slide-move');\n        }\n    });\n\n})();\n"],"sourceRoot":"/source/"}